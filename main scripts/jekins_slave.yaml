---
- hosts: [jenkins-slave]
  become: true
  tasks:
    - name: Update the Ubuntu Repository
      apt:
        update_cache: true
        cache_valid_time: 3600

    - name: Install Java for slave
      apt:
        name: openjdk-17-jre
        state: present

    - name: Download Maven Package
      get_url:
        url: https://dlcdn.apache.org/maven/maven-3/3.9.11/binaries/apache-maven-3.9.11-bin.tar.gz
        dest: /opt/apache-maven-3.9.11-bin.tar.gz

    - name: Extract Maven Package
      unarchive:
        src: /opt/apache-maven-3.9.11-bin.tar.gz
        dest: /opt/
        remote_src: yes

    - name: Download ing  the  java  17  
      get_url:
       url: https://download.java.net/java/GA/jdk17.0.2/dfd4a8d0985749f896bed50d7138ee7f/8/GPL/openjdk-17.0.2_linux-x64_bin.tar.gz
       dest: /opt
    - name:  Extracting java  Packages  
      unarchive:
       src: /opt/openjdk-17.0.2_linux-x64_bin.tar.gz
       dest: /opt
       remote_src: yes
    - name: move to jdk 17 
      command: mv /opt/jdk-17.0.2/ /opt/jdk-17/
    - name: /home/asielnathala/jenkins
      file:
       path: /home/asielnathala/jenkins
       state: directory
       mode: '0755'
       owner: asielnathala
       group: asielnathala
    - name: Install Docker
      apt:
       name: docker.io
       state: present
    - name: add user asielnathala to docker group
      user:
       name: asielnathala
       groups: docker
       append: yes       

